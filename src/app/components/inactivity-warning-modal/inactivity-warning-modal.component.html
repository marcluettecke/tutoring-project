@if (isVisible) {
  <div class="backdrop" (click)="onDismiss()"></div>
  
  <div class="inactivity-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <div class="warning-icon">
        <fa-icon [icon]="faExclamationTriangle"></fa-icon>
      </div>
      <h3 class="modal-title">
        @if (modalType === 'progress') {
          Sesión inactiva
        } @else {
          Sesión a punto de expirar
        }
      </h3>
    </div>
    
    <div class="modal-content">
      <p class="warning-message">
        @if (modalType === 'progress') {
          Has estado inactivo durante un tiempo. ¿Deseas continuar con el seguimiento de tu sesión?
        } @else {
          Tu sesión está a punto de expirar debido a inactividad. ¿Deseas continuar trabajando?
        }
      </p>
      
      <div class="countdown-display" [class]="urgencyClass">
        <div class="countdown-circle">
          <div class="countdown-number">{{ countdownText }}</div>
        </div>
        <div class="countdown-label">
          @if (modalType === 'progress') {
            Se cerrará automáticamente
          } @else {
            Serás desconectado automáticamente
          }
        </div>
      </div>
    </div>
    
    <div class="modal-actions">
      @if (modalType === 'progress') {
        <button 
          class="btn btn-outline" 
          (click)="onDismiss()"
          type="button">
          <fa-icon [icon]="faTimes"></fa-icon>
          Continuar sin seguimiento
        </button>
        <button 
          class="btn btn-secondary" 
          (click)="onStopTracking()"
          type="button">
          <fa-icon [icon]="faStop"></fa-icon>
          Detener seguimiento
        </button>
        <button 
          class="btn btn-primary" 
          (click)="onExtendSession()"
          type="button">
          <fa-icon [icon]="faClock"></fa-icon>
          Continuar sesión
        </button>
      } @else {
        <button 
          class="btn btn-secondary" 
          (click)="onLogout()"
          type="button">
          <fa-icon [icon]="faSignOut"></fa-icon>
          Cerrar Sesión
        </button>
        <button 
          class="btn btn-primary" 
          (click)="onExtendSession()"
          type="button">
          <fa-icon [icon]="faCheck"></fa-icon>
          Continuar Trabajando
        </button>
      }
    </div>
  </div>
}